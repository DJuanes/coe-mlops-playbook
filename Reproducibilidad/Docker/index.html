
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="Playbook de Ingeniería de Machine Learning de CoE Analytics">
      
      
        <meta name="author" content="YPF - CoE Analytics">
      
      
      <link rel="icon" href="../../resources/YPF.svg">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-8.2.16">
    
    
      
        <title>Docker - CoE MLOps Playbook</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.1c3799f8.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.cc9b2e1e.min.css">
        
          
          
          <meta name="theme-color" content="#2094f3">
        
      
    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="" data-md-color-primary="blue" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#contenedorizacion" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="CoE MLOps Playbook" class="md-header__button md-logo" aria-label="CoE MLOps Playbook" data-md-component="logo">
      
  <img src="../../resources/YPF.svg" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            CoE MLOps Playbook
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Docker
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/DJuanes/coe-mlops-playbook" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="CoE MLOps Playbook" class="md-nav__button md-logo" aria-label="CoE MLOps Playbook" data-md-component="logo">
      
  <img src="../../resources/YPF.svg" alt="logo">

    </a>
    CoE MLOps Playbook
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/DJuanes/coe-mlops-playbook" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.1.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2022 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_2" type="checkbox" id="__nav_2" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_2">
          Diseño
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Diseño" data-md-level="1">
        <label class="md-nav__title" for="__nav_2">
          <span class="md-nav__icon md-icon"></span>
          Diseño
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Dise%C3%B1o/Producto/" class="md-nav__link">
        Producto
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Dise%C3%B1o/Ingenier%C3%ADa/" class="md-nav__link">
        Ingeniería
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Dise%C3%B1o/Proyecto/" class="md-nav__link">
        Proyecto
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_3" type="checkbox" id="__nav_3" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_3">
          Datos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Datos" data-md-level="1">
        <label class="md-nav__title" for="__nav_3">
          <span class="md-nav__icon md-icon"></span>
          Datos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Datos/Etiquetado/" class="md-nav__link">
        Etiquetado
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Datos/Exploraci%C3%B3n/" class="md-nav__link">
        Exploración
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Datos/Preprocesamiento/" class="md-nav__link">
        Preprocesamiento
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Datos/Splitting/" class="md-nav__link">
        Splitting
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Datos/Aumento/" class="md-nav__link">
        Aumento
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_4" type="checkbox" id="__nav_4" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_4">
          Modelado
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Modelado" data-md-level="1">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          Modelado
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Modelado/L%C3%ADneas%20base/" class="md-nav__link">
        Líneas base
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Modelado/Evaluaci%C3%B3n/" class="md-nav__link">
        Evaluación
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Modelado/Seguimiento%20de%20experimentos/" class="md-nav__link">
        Seguimiento de experimentos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Modelado/Optimizaci%C3%B3n/" class="md-nav__link">
        Optimización
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_5" type="checkbox" id="__nav_5" >
      
      
      
        
          
        
          
        
          
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_5">
          Desarrollo
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Desarrollo" data-md-level="1">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Desarrollo
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Empaquetado/" class="md-nav__link">
        Empaquetado
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Organizaci%C3%B3n/" class="md-nav__link">
        Organización
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Logging/" class="md-nav__link">
        Logging
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Documentaci%C3%B3n/" class="md-nav__link">
        Documentación
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Estilismo/" class="md-nav__link">
        Estilismo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Seguridad/" class="md-nav__link">
        Seguridad
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Desarrollo/Makefile.md" class="md-nav__link">
        Makefile
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_6" type="checkbox" id="__nav_6" >
      
      
      
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_6">
          Inferencia
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Inferencia" data-md-level="1">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Inferencia
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Inferencia/L%C3%ADnea%20de%20comando/" class="md-nav__link">
        Línea de comando
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Inferencia/API%20RESTful/" class="md-nav__link">
        API RESTful
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_7" type="checkbox" id="__nav_7" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_7">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Testing" data-md-level="1">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Testing
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Pruebas/Testing/" class="md-nav__link">
        Testing
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Pruebas/C%C3%B3digo/" class="md-nav__link">
        Código
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Pruebas/Datos/" class="md-nav__link">
        Datos
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Pruebas/Modelos/" class="md-nav__link">
        Modelos
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_8" type="checkbox" id="__nav_8" checked>
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_8">
          Reproducibilidad
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Reproducibilidad" data-md-level="1">
        <label class="md-nav__title" for="__nav_8">
          <span class="md-nav__icon md-icon"></span>
          Reproducibilidad
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Git/" class="md-nav__link">
        Git
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Pre-commit/" class="md-nav__link">
        Pre-commit
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../Versionado/" class="md-nav__link">
        Versionado
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" data-md-toggle="toc" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Docker
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Docker
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    Introducción
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arquitectura" class="md-nav__link">
    Arquitectura
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion" class="md-nav__link">
    Instalación
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#imagenes" class="md-nav__link">
    Imágenes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    Dockerfile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilar-imagenes" class="md-nav__link">
    Compilar imágenes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejecutar-contenedores" class="md-nav__link">
    Ejecutar contenedores
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depurar" class="md-nav__link">
    Depurar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#produccion" class="md-nav__link">
    Producción
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_9" type="checkbox" id="__nav_9" >
      
      
      
        
          
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_9">
          Producción
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Producción" data-md-level="1">
        <label class="md-nav__title" for="__nav_9">
          <span class="md-nav__icon md-icon"></span>
          Producción
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Producci%C3%B3n/Dashboard/" class="md-nav__link">
        Dashboard
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Producci%C3%B3n/CI-CD/" class="md-nav__link">
        CI-CD
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Producci%C3%B3n/Monitoreo/" class="md-nav__link">
        Monitoreo
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Producci%C3%B3n/Dise%C3%B1o%20de%20sistemas/" class="md-nav__link">
        Diseño de sistemas
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
        <input class="md-nav__toggle md-toggle" data-md-toggle="__nav_10" type="checkbox" id="__nav_10" >
      
      
      
        
          
        
          
        
          
        
      
      
        <label class="md-nav__link" for="__nav_10">
          Ingeniería de datos
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" aria-label="Ingeniería de datos" data-md-level="1">
        <label class="md-nav__title" for="__nav_10">
          <span class="md-nav__icon md-icon"></span>
          Ingeniería de datos
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Ingenier%C3%ADa%20de%20datos/Data%20stack/" class="md-nav__link">
        Data stack
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Ingenier%C3%ADa%20de%20datos/Orquestaci%C3%B3n/" class="md-nav__link">
        Orquestación
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../Ingenier%C3%ADa%20de%20datos/Feature%20store/" class="md-nav__link">
        Feature store
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#introduccion" class="md-nav__link">
    Introducción
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#docker" class="md-nav__link">
    Docker
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arquitectura" class="md-nav__link">
    Arquitectura
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#instalacion" class="md-nav__link">
    Instalación
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#imagenes" class="md-nav__link">
    Imágenes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#dockerfile" class="md-nav__link">
    Dockerfile
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#compilar-imagenes" class="md-nav__link">
    Compilar imágenes
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#ejecutar-contenedores" class="md-nav__link">
    Ejecutar contenedores
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#depurar" class="md-nav__link">
    Depurar
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#produccion" class="md-nav__link">
    Producción
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content" data-md-component="content">
            <article class="md-content__inner md-typeset">
              
                


<h1 id="contenedorizacion">Contenedorización</h1>
<p>Empaquetar nuestra aplicación en contenedores reproducibles y escalables.</p>
<h2 id="introduccion">Introducción</h2>
<p>El último paso para lograr la reproducibilidad es desplegar nuestro código versionado y los artefactos en un entorno reproducible.
Esto va mucho más allá del entorno virtual que configuramos para nuestras aplicaciones Python porque hay especificaciones a nivel de sistema (sistema operativo, paquetes implícitos necesarios, etc.)
que no estamos capturando.
Queremos ser capaces de encapsular todos los requisitos que necesitamos para que no haya dependencias externas que impidan a otra persona reproducir nuestra aplicación exacta.</p>
<h2 id="docker">Docker</h2>
<p>En soluciones para la reproducibilidad a nivel de sistema el motor de contenedores Docker es el más popular por varias ventajas clave:</p>
<ul>
<li>reproducibilidad vía Dockerfile con instrucciones explícitas para desplegar nuestra aplicación en un sistema específico.</li>
<li>aislamiento a través de los contenedores para no afectar a otras aplicaciones que también puedan ejecutarse en el mismo sistema operativo subyacente.</li>
<li>y muchas más ventajas como el tamaño, la velocidad, Docker Hub, etc.</li>
</ul>
<p>Vamos a utilizar Docker para desplegar nuestra aplicación localmente de forma aislada, reproducible y escalable.
Una vez que hagamos esto, cualquier máquina con el motor Docker instalado podrá reproducir nuestro trabajo.</p>
<h2 id="arquitectura">Arquitectura</h2>
<p>El motor de contenedores Docker se encarga de poner en marcha los contenedores configurados, que contienen nuestra aplicación y sus dependencias (binarios, librerías, etc.).
El motor de contenedores es muy eficiente, ya que no necesita crear un sistema operativo distinto para cada aplicación en contenedor.
Esto también significa que nuestros contenedores pueden compartir los recursos del sistema a través del motor Docker.</p>
<h2 id="instalacion">Instalación</h2>
<p>Una vez <a href="https://docs.docker.com/get-docker/">instalado</a>, podemos iniciar el Docker Desktop que nos permitirá crear y desplegar nuestras aplicaciones en contenedores.</p>
<div class="highlight"><pre><span></span><code>docker --version
</code></pre></div>
<h2 id="imagenes">Imágenes</h2>
<p>El primer paso es construir una imagen Docker que tenga la aplicación y todas sus dependencias especificadas.
Podemos crear esta imagen utilizando un Dockerfile que describe un conjunto de instrucciones.
Estas instrucciones esencialmente construyen capas de imagen de sólo lectura en la parte superior de cada uno para construir nuestra imagen completa.
Echemos un vistazo al Dockerfile de nuestra aplicación y a las capas de imagen que crea.</p>
<h2 id="dockerfile">Dockerfile</h2>
<p>Empezaremos creando un Dockerfile:</p>
<div class="highlight"><pre><span></span><code>touch Dockerfile
</code></pre></div>
<p>La primera línea que escribiremos en nuestro Dockerfile especifica la imagen base de la que queremos extraer.
Queremos usar la imagen base para ejecutar aplicaciones basadas en Python versión 3.9 con la variante slim.
Esta variante slim con paquetes mínimos satisface nuestros requisitos y mantiene el tamaño de la capa de la imagen bajo.</p>
<div class="highlight"><pre><span></span><code><span class="c"># Base image</span>
<span class="k">FROM</span><span class="w"> </span><span class="s">python:3.9-slim</span>
</code></pre></div>
<p>A continuación vamos a instalar las dependencias de nuestra aplicación. En primer lugar, vamos a copiar los archivos necesarios de nuestro sistema de archivos local.
Una vez que tenemos nuestros archivos, podemos instalar los paquetes necesarios para instalar las dependencias de nuestra aplicación utilizando el comando RUN.
Una vez que hayamos terminado de usar los paquetes, podemos eliminarlos para mantener el tamaño de nuestra capa de imagen al mínimo.</p>
<div class="highlight"><pre><span></span><code><span class="c"># Instalar dependencias</span>
<span class="k">WORKDIR</span><span class="w"> </span><span class="s">/mlops</span>
<span class="k">COPY</span><span class="w"> </span>setup.py setup.py
<span class="k">COPY</span><span class="w"> </span>requirements.txt requirements.txt
<span class="k">RUN</span><span class="w"> </span>apt-get update <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get install -y --no-install-recommends gcc build-essential <span class="se">\</span>
    <span class="o">&amp;&amp;</span> rm -rf /var/lib/apt/lists/* <span class="se">\</span>
    <span class="o">&amp;&amp;</span> python3 -m pip install --upgrade pip setuptools wheel <span class="se">\</span>
    <span class="o">&amp;&amp;</span> python3 -m pip install -e . --no-cache-dir <span class="se">\</span>
    <span class="o">&amp;&amp;</span> python3 -m pip install <span class="nv">protobuf</span><span class="o">==</span><span class="m">3</span>.20.1 --no-cache-dir <span class="se">\</span>
    <span class="o">&amp;&amp;</span> apt-get purge -y --auto-remove gcc build-essential
</code></pre></div>
<p>A continuación, estamos listos para copiar los archivos necesarios para ejecutar nuestra aplicación.</p>
<div class="highlight"><pre><span></span><code><span class="c"># Copy</span>
<span class="k">COPY</span><span class="w"> </span>coe_template coe_template
<span class="k">COPY</span><span class="w"> </span>app app
<span class="k">COPY</span><span class="w"> </span>data data
<span class="k">COPY</span><span class="w"> </span>config config
<span class="k">COPY</span><span class="w"> </span>stores stores

<span class="c"># Extraer activos de S3</span>
<span class="k">RUN</span><span class="w"> </span>dvc init --no-scm
<span class="k">RUN</span><span class="w"> </span>dvc remote add -d storage stores/blob
<span class="k">RUN</span><span class="w"> </span>dvc pull
</code></pre></div>
<p>Como nuestra aplicación (API) requiere que el puerto 8000 esté abierto, necesitamos especificar en nuestro Dockerfile que lo exponga.</p>
<div class="highlight"><pre><span></span><code><span class="c"># Exponer puertos</span>
<span class="k">EXPOSE</span><span class="w"> </span><span class="s">8000</span>
</code></pre></div>
<p>El último paso es especificar el ejecutable que se ejecutará cuando se construya un contenedor a partir de nuestra imagen.
Para nuestra aplicación, queremos lanzar nuestra API con gunicorn.</p>
<div class="highlight"><pre><span></span><code><span class="c"># Iniciar aplicación</span>
<span class="k">ENTRYPOINT</span><span class="w"> </span><span class="p">[</span><span class="s2">&quot;gunicorn&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-c&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app/gunicorn.py&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;-k&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;uvicorn.workers.UvicornWorker&quot;</span><span class="p">,</span><span class="w"> </span><span class="s2">&quot;app.api:app&quot;</span><span class="p">]</span>
</code></pre></div>
<h2 id="compilar-imagenes">Compilar imágenes</h2>
<p>Una vez que hemos terminado de componer el Dockerfile, estamos listos para construir nuestra imagen utilizando el comando build que nos permite añadir una etiqueta
y especificar la ubicación del Dockerfile a utilizar.</p>
<div class="highlight"><pre><span></span><code>docker build -t coe_template:latest -f Dockerfile .
</code></pre></div>
<p>Podemos inspeccionar todas las imágenes construidas y sus atributos:</p>
<div class="highlight"><pre><span></span><code>docker images
</code></pre></div>
<p>También podemos eliminar alguna o todas las imágenes en función de su identificación única.</p>
<div class="highlight"><pre><span></span><code>docker rmi &lt;IMAGE_ID&gt;              <span class="c1"># eliminar una imagen</span>
docker rmi <span class="k">$(</span>docker images -a -q<span class="k">)</span>  <span class="c1"># eliminar todas las imágenes</span>
</code></pre></div>
<h2 id="ejecutar-contenedores">Ejecutar contenedores</h2>
<p>Una vez que hemos construido nuestra imagen, estamos listos para ejecutar un contenedor usando esa imagen con el comando run que nos permite especificar la imagen, el reenvío de puertos, etc.</p>
<div class="highlight"><pre><span></span><code>docker run -p <span class="m">8000</span>:8000 --name coe_template coe_template:latest
</code></pre></div>
<p>Una vez que tenemos nuestro contenedor en funcionamiento, podemos utilizar la API gracias al puerto que estamos compartiendo (8000):</p>
<div class="highlight"><pre><span></span><code>curl -X <span class="s1">&#39;POST&#39;</span> <span class="se">\</span>
  <span class="s1">&#39;http://localhost:8000/predict&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;accept: application/json&#39;</span> <span class="se">\</span>
  -H <span class="s1">&#39;Content-Type: application/json&#39;</span> <span class="se">\</span>
  -d <span class="s1">&#39;{</span>
<span class="s1">  &quot;texts&quot;: [</span>
<span class="s1">    {</span>
<span class="s1">      &quot;text&quot;: &quot;Transfer learning with transformers for text classification.&quot;</span>
<span class="s1">    }</span>
<span class="s1">  ]</span>
<span class="s1">}&#39;</span>
</code></pre></div>
<p>Podemos inspeccionar todos los contenedores así:</p>
<div class="highlight"><pre><span></span><code>docker ps     <span class="c1"># contenedores en funcionamiento</span>
docker ps -a  <span class="c1"># contenedores detenidos</span>
</code></pre></div>
<p>También podemos detener y eliminar cualquiera o todos los contenedores en función de sus identificadores únicos:</p>
<div class="highlight"><pre><span></span><code>docker stop &lt;CONTAINER_ID&gt;      <span class="c1"># detener un contenedor en ejecución</span>
docker rm &lt;CONTAINER_ID&gt;        <span class="c1"># eliminar un contenedor</span>
docker stop <span class="k">$(</span>docker ps -a -q<span class="k">)</span>  <span class="c1"># detener todos los contenedores</span>
docker rm <span class="k">$(</span>docker ps -a -q<span class="k">)</span>    <span class="c1"># eliminar todos los contenedores</span>
</code></pre></div>
<h2 id="depurar">Depurar</h2>
<p>En el caso de que nos encontremos con errores mientras construimos nuestras capas de imagen, una forma muy fácil de depurar el problema
es ejecutar el contenedor con las capas de imagen que se han construido hasta el momento.
Podemos hacer esto incluyendo sólo los comandos que se han ejecutado con éxito hasta ahora en el Dockerfile.
Y luego tenemos que reconstruir la imagen (ya que alteramos el Dockerfile) y ejecutar el contenedor:</p>
<div class="highlight"><pre><span></span><code>docker build -t coe_template:latest -f Dockerfile .
docker run -p <span class="m">8000</span>:8000 -it coe_template /bin/bash
</code></pre></div>
<p>Una vez que tenemos nuestro contenedor funcionando, podemos utilizar nuestra aplicación como lo haríamos en nuestra máquina local, pero ahora es reproducible en cualquier sistema operativo.</p>
<h2 id="produccion">Producción</h2>
<p>Este <code>Dockerfile</code> es comúnmente el artefacto final para desplegar y escalar sus servicios, con algunos cambios:</p>
<ul>
<li>los activos de datos se extraerían de una ubicación de almacenamiento remota.</li>
<li>los artefactos del modelo se cargarían desde un registro de modelos remoto.</li>
<li>el código se cargaría desde un repositorio remoto.</li>
</ul>
<p>Todos estos cambios implicarían el uso de las credenciales adecuadas (a través de secretos encriptados e incluso pueden desplegarse automáticamente a través de flujos de trabajo CI/CD).
Pero, por supuesto, hay responsabilidades posteriores como el monitoreo.</p>

              
            </article>
          </div>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
    <nav class="md-footer__inner md-grid" aria-label="Footer">
      
        
        <a href="../Versionado/" class="md-footer__link md-footer__link--prev" aria-label="Previous: Versionado" rel="prev">
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
          </div>
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Previous
              </span>
              Versionado
            </div>
          </div>
        </a>
      
      
        
        <a href="../../Producci%C3%B3n/Dashboard/" class="md-footer__link md-footer__link--next" aria-label="Next: Dashboard" rel="next">
          <div class="md-footer__title">
            <div class="md-ellipsis">
              <span class="md-footer__direction">
                Next
              </span>
              Dashboard
            </div>
          </div>
          <div class="md-footer__button md-icon">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4Z"/></svg>
          </div>
        </a>
      
    </nav>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.instant", "navigation.indexes"], "search": "../../assets/javascripts/workers/search.2a1c317c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version.title": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.3a4b43e5.min.js"></script>
      
    
  </body>
</html>